<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì•”ì‚° O/X ì—°ìŠµ - ì„¸ë¡œ ê³„ì‚°</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #problem { font-size: 24px; margin: 20px; font-family: monospace; white-space: pre; }
        #result { margin-top: 10px; font-size: 20px; }
    </style>
</head>
<body>

<h1>ğŸ§® ì•”ì‚° O/X ì—°ìŠµ (ì„¸ë¡œ ê³„ì‚°)</h1>
<p>ì œì‹œëœ ì •ë‹µì´ ë§ëŠ”ì§€ O ë˜ëŠ” Xë¥¼ ëˆŒëŸ¬ í™•ì¸í•˜ì„¸ìš”!</p>

<div id="problem"></div>
<p id="givenAnswer"></p>

<button onclick="checkAnswer(true)">â­• ë§ì•„ìš”</button>
<button onclick="checkAnswer(false)">âŒ í‹€ë ¤ìš”</button>
<p id="result"></p>
<button onclick="generateProblem()">ìƒˆ ë¬¸ì œ</button>

<script>
    let num1, num2, num3, operator1, operator2, correctAnswer, displayedAnswer;

    function generateProblem() {
        // 1~9999ê¹Œì§€ì˜ ìˆ«ì ëœë¤ ìƒì„± (1~4ìë¦¬ ê°€ëŠ¥)
        num1 = Math.floor(Math.random() * 9999) + 1;
        num2 = Math.floor(Math.random() * 9999) + 1;
        num3 = Math.floor(Math.random() * 9999) + 1;

        operator1 = Math.random() > 0.5 ? '+' : '-';
        operator2 = Math.random() > 0.5 ? '+' : '-';

        // ì‹¤ì œ ì •ë‹µ ê³„ì‚°
        correctAnswer = eval(`${num1} ${operator1} ${num2} ${operator2} ${num3}`);

        // 51% í™•ë¥ ë¡œ ë§ëŠ” ë‹µ, 49% í™•ë¥ ë¡œ í‹€ë¦° ë‹µ ì œê³µ
        displayedAnswer = Math.random() > 0.49 ? correctAnswer : correctAnswer + Math.floor(Math.random() * 20) - 10;

        // ìë¦¬ ë§ì¶° ì„¸ë¡œ ì •ë ¬ì„ ìœ„í•œ ë¬¸ìì—´ ë³€í™˜
        let longestLength = Math.max(num1.toString().length, num2.toString().length, num3.toString().length);
        let formattedNum1 = num1.toString().padStart(longestLength, ' ');
        let formattedNum2 = `${operator1} ${num2.toString().padStart(longestLength - 2, ' ')}`;
        let formattedNum3 = `${operator2} ${num3.toString().padStart(longestLength - 2, ' ')}`;
        let line = '-'.repeat(longestLength);

        document.getElementById("problem").innerText = `${formattedNum1}\n${formattedNum2}\n${formattedNum3}\n${line}`;
        document.getElementById("givenAnswer").innerText = `ì œì‹œëœ ì •ë‹µ: ${displayedAnswer}`;
        document.getElementById("result").innerText = "";
    }

    function checkAnswer(isCorrect) {
        let actualCorrectness = (displayedAnswer === correctAnswer);
        if (isCorrect === actualCorrectness) {
            document.getElementById("result").innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤!";
        } else {
            document.getElementById("result").innerText = "âŒ í‹€ë ¸ì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”!";
        }
    }

    generateProblem();
</script>

</body>

<link rel="manifest" href="manifest.json">
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js")
      .then(() => console.log("Service Worker ë“±ë¡ ì™„ë£Œ!"))
      .catch((error) => console.log("Service Worker ë“±ë¡ ì‹¤íŒ¨:", error));
  }
</script>

</html>
